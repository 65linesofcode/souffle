#!/bin/bash

#
# .souffle-sh
#
# This script provides a nice shell environment for working with Souffle.
# Simply do a 'source .souffle-sh' from the terminal to start using it.
#

export SOUFFLE=$(pwd)

JOBS=8

alias souffle=$SOUFFLE/src/souffle
alias souffle-profile=$SOUFFLE/src/souffle-profile

souffle_setup() {
    cd $SOUFFLE && \
    chmod 775 bootstrap && \
    ./bootstrap && \
    chmod 775 configure && \
    ./configure && \
    make -j $JOBS && \
    cd -
}

souffle_teardown() {
    cd $SOUFFLE && \
    git clean -xdf && \
    cd -
}

souffle_make() {
    cd $SOUFFLE && \
    make -j $JOBS && \
    cd -
}

souffle_test() {
    cd $SOUFFLE/test && \
    ./testsuite -j $JOBS $@ && \
    cd -
}
